CREATE OR REPLACE FUNCTION insert_login_from_students()
RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO login (login_id, password, role, user_id)
    VALUES (NEW.email, NEW.date_of_birth, 'student',student_id);
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- Create the trigger
CREATE TRIGGER insert_login_trigger
AFTER INSERT ON students
FOR EACH ROW
EXECUTE FUNCTION insert_login_from_students();


CREATE OR REPLACE FUNCTION delete_login_on_student_delete()
RETURNS TRIGGER AS $$
BEGIN
    DELETE FROM login WHERE login_id = OLD.email;
    RETURN OLD;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER delete_login_trigger
BEFORE DELETE ON students
FOR EACH ROW
EXECUTE FUNCTION delete_login_on_student_delete();

-------------------------------------------------
> Teacher 

CREATE OR REPLACE FUNCTION insert_login_from_teachers(),
RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO login (login_id, password, role, user_id)
    VALUES (NEW.email, NEW.date_of_birth, 'teacher', teacher_id);
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER insert_login_trigger_teacher
AFTER INSERT ON teachers
FOR EACH ROW
EXECUTE FUNCTION insert_login_from_teachers();
