use lettre::transport::smtp::authentication::Credentials;
use lettre::{Message, SmtpTransport, Transport};

fn send_email() -> Result<(), lettre::transport::smtp::error::Error> {
    let smtp_key: &str = "<your-smtp-key>";
    let from_email: &str = "<your-email>";
    let to_email: &str = "<receiver-email>";
    let host: &str = "smtp-relay.sendinblue.com";

    let email: Message = Message::builder()
        .from(from_email.parse().unwrap())
        .to(to_email.parse().unwrap())
        .subject("Your subject")
        .body("Your body".to_string())
        .unwrap();

    let creds: Credentials = Credentials::new(from_email.to_string(), smtp_key.to_string());

    let mailer: SmtpTransport = SmtpTransport::relay(&host)?
        .credentials(creds)
        .build();

    mailer.send(&email)?;
    Ok(())
}

fn some_other_function() {
    // Call the send_email function from another function
    match send_email() {
        Ok(_) => println!("Email sent successfully!"),
        Err(e) => panic!("Could not send email: {:?}", e),
    }
}

fn main() {
    // Call some_other_function
    some_other_function();
}
